# AI Prompt 编写规范

> 统一的 AI 提示词编写标准，确保提示词的质量、一致性和可维护性

## 文档结构规范

### 1. 文件头部信息
```markdown
# [角色名称] - [简短描述]

> [一句话概述该 prompt 的核心职责和适用范围]
```

### 2. 标准章节结构
```markdown
## Role
[明确定义 AI 的角色和职责范围]

## Skills  
[列出该角色需要掌握的核心技能]

## Rules
[制定明确的行为准则和约束条件]

## [业务模板/实现模板]
[提供具体的代码模板和实现示例]

## [常用模式/最佳实践]
[总结常见的业务模式和解决方案]
```

## 内容编写规范

### Role 章节规范
- **职责明确**：清晰定义 AI 的具体职责范围
- **边界清楚**：明确说明什么做，什么不做
- **目标导向**：以解决具体问题为导向

```markdown
## Role
你是 [具体角色名称]，专门负责 [具体职责范围]。

示例：
你是 Vue 页面业务逻辑专家，专门负责 `src/views/` 目录下页面组件的业务逻辑实现。
```

### Skills 章节规范
- **技术栈明确**：列出具体的技术栈和版本
- **能力分层**：按重要性和复杂度分层描述
- **实用导向**：聚焦实际工作中需要的技能

```markdown
## Skills
- [核心技术栈] + [版本信息]
- [业务能力描述]
- [架构设计能力]
- [问题解决能力]

示例：
- Vue 3.5 Composition API 和 `<script setup>` 语法
- TypeScript 类型定义和业务逻辑封装
- 分页、搜索、CRUD 操作的业务流程
```

### Rules 章节规范
- **行为约束**：明确的行为准则和禁止事项
- **质量标准**：代码质量和规范要求
- **优先级排序**：按重要性排列规则

```markdown
## Rules
1. **[最重要的规则]**：[具体描述和要求]
2. **[次要规则]**：[具体描述和要求]
3. **[补充规则]**：[具体描述和要求]

示例：
1. **只关注业务逻辑**：不涉及任何样式、布局、UI 相关内容
2. **使用标准模式**：严格遵循 `useApi` 和 `usePagination` 使用规范
3. **完整的错误处理**：每个 API 调用都要有完整的错误处理
```

## 代码模板规范

### 模板命名规范
- **功能导向**：以功能或场景命名模板
- **层次清晰**：使用三级标题组织模板
- **示例完整**：每个模板都要有完整的代码示例

```markdown
### [功能名称]业务逻辑

```typescript
<script setup lang="ts">
// 1. 导入语句
// 2. 组件选项
// 3. Props/Emits 定义
// 4. 响应式数据
// 5. 计算属性
// 6. 方法定义
// 7. 生命周期
</script>
```

### 代码注释规范
- **关键步骤**：为重要的业务逻辑添加注释
- **最佳实践**：标注 ✅ 正确做法和 ❌ 错误做法
- **参数说明**：为复杂的参数和配置添加说明

```typescript
// ✅ 正确 - 使用最新 Props 语法，直接解构
const { userId, userName = '' } = defineProps<{...}>()

// ❌ 错误 - 使用 withDefaults
const props = withDefaults(defineProps<{...}>(), {...})
```

## 最佳实践规范

### 实践模式组织
- **场景分类**：按使用场景分类最佳实践
- **问题导向**：以解决具体问题为出发点
- **代码示例**：每个实践都要有对应的代码示例

```markdown
### 1. [场景名称]模式
```typescript
// [问题描述]
// [解决方案代码]
```

### 更新维护规范

#### 版本控制
- **向后兼容**：新增内容不影响现有规范
- **废弃标记**：明确标记过时的做法
- **迁移指南**：提供从旧规范到新规范的迁移方法

#### 内容更新原则
1. **技术栈更新**：及时更新技术栈版本和新特性
2. **最佳实践演进**：根据项目实践经验更新最佳实践
3. **问题反馈**：根据使用反馈优化规范内容

## 质量检查清单

### 内容完整性
- [ ] 角色定义清晰明确
- [ ] 技能列表完整实用
- [ ] 规则约束具体可执行
- [ ] 代码模板完整可用
- [ ] 最佳实践覆盖常见场景

### 代码质量
- [ ] 代码示例语法正确
- [ ] 符合项目编码规范
- [ ] 包含错误处理逻辑
- [ ] 类型定义完整
- [ ] 注释清晰有用

### 可用性
- [ ] 结构层次清晰
- [ ] 内容易于理解
- [ ] 示例贴近实际使用
- [ ] 规范易于执行
- [ ] 便于查找和引用

## 常见问题避免

### 内容问题
- ❌ 规则过于宽泛，缺乏具体指导
- ❌ 代码示例过时或不完整
- ❌ 缺少错误处理和边界情况
- ❌ 技术栈版本信息过时

### 结构问题
- ❌ 章节组织混乱，逻辑不清
- ❌ 内容重复，缺乏层次
- ❌ 缺少实际使用示例
- ❌ 规范与实际项目脱节

### 维护问题
- ❌ 长期不更新，内容过时
- ❌ 缺少版本控制和变更记录
- ❌ 没有收集使用反馈
- ❌ 缺少质量检查机制

## 分类组织规范

### 目录结构
```
ai-prompts/
├── README.md                    # 总体说明和索引
├── prompt-writing-standards.md # 本规范文件
├── main-assistant.md           # 主助手配置
├── business/                   # 业务逻辑相关
│   ├── components.md          # 组件业务逻辑
│   └── views.md              # 页面业务逻辑
├── shared/                    # 共享规范
│   ├── code-standards.md     # 代码规范
│   ├── api-patterns.md       # API 调用模式
│   ├── error-handling.md     # 错误处理规范
│   └── pagination-patterns.md # 分页模式
└── styling/                   # 样式相关
    └── components.md         # 组件样式规范
```

### 文件命名规范
- **功能导向**：以功能或职责命名，如 `components.md`、`views.md`
- **层次清晰**：使用目录分层，避免文件名过长
- **一致性**：同类文件使用统一的命名模式

### 内容分工原则
- **单一职责**：每个 prompt 文件专注一个特定领域
- **避免重复**：共同规范放在 `shared/` 目录
- **相互引用**：通过引用避免内容重复

## 语言表达规范

### 语气和风格
- **专业准确**：使用准确的技术术语
- **简洁明了**：避免冗长的描述
- **指导性强**：提供明确的行动指南
- **友好易懂**：避免过于生硬的表达

### 术语使用
- **技术术语**：使用行业标准术语，避免自创词汇
- **版本信息**：明确标注技术栈版本
- **中英文混用**：技术名词使用英文，说明使用中文

### 示例标注
```markdown
// ✅ 推荐 - 明确标注推荐做法
// ❌ 避免 - 明确标注不推荐做法
// 💡 提示 - 提供额外的提示信息
// ⚠️ 注意 - 标注需要特别注意的地方
```

## 模板复用规范

### 通用模板抽取
- **共同模式**：将多个场景共用的模式抽取为通用模板
- **参数化**：使用占位符支持不同场景的定制
- **组合使用**：支持多个模板的组合使用

### 模板引用方式
```markdown
详细的 API 调用规范请参考：[API 调用模式](../shared/api-patterns.md)

错误处理的最佳实践请参考：[错误处理规范](../shared/error-handling.md)
```

## 使用建议

### 编写新 Prompt
1. **需求分析**：明确 prompt 的目标用户和使用场景
2. **结构规划**：按照标准结构组织内容
3. **内容编写**：遵循内容编写规范
4. **质量检查**：使用质量检查清单验证
5. **测试验证**：通过实际使用验证效果

### 维护现有 Prompt
1. **定期审查**：每季度检查一次内容时效性
2. **技术更新**：及时更新技术栈和最佳实践
3. **反馈收集**：收集使用者的反馈和建议
4. **持续优化**：根据反馈持续改进内容

### 团队协作
1. **Review 机制**：新增或修改 prompt 需要团队 review
2. **标准培训**：定期培训团队成员使用本规范
3. **经验分享**：定期分享 prompt 使用经验和改进建议
4. **版本管理**：使用版本控制管理 prompt 的变更历史

### 效果评估
1. **使用频率**：统计各个 prompt 的使用频率
2. **问题反馈**：收集使用过程中遇到的问题
3. **效果评价**：评估 prompt 对工作效率的提升效果
4. **持续改进**：基于评估结果持续改进 prompt 质量

## 🔧 AI 助手文件夹理解优化

### 当前问题
AI 助手在理解文件夹路径时经常出现以下问题：
- 混淆不同工作区的路径
- 无法正确识别相对路径和绝对路径
- 在多个项目间切换时路径理解错误

### 解决方案

#### 1. 路径引用规范
在 prompt 中明确指定路径引用方式：

```markdown
## 文件路径规范

### 相对路径使用
- 当前工作区根目录：`./`
- 子目录引用：`ai-prompts/shared/api-patterns.md`
- 避免使用：`/Users/username/project/...` 等绝对路径

### 路径验证步骤
1. 首先使用 `view` 工具确认目录结构
2. 使用相对路径引用文件
3. 如果路径错误，重新查看目录结构
```

#### 2. 工作区识别规范
```markdown
## 工作区识别

### 当前工作区确认
在开始任何文件操作前，先确认当前工作区：
- 使用 `view .` 查看根目录结构
- 确认是否在正确的项目目录中
- 识别项目特征文件（如 package.json、README.md 等）

### 多项目切换处理
当用户提到不同项目路径时：
- 明确询问用户当前工作区
- 使用相对路径而非绝对路径
- 在操作前验证路径的正确性
```

#### 3. 错误处理规范
```markdown
## 路径错误处理

### 常见错误类型
1. **文件不存在**：先用 `view` 确认目录结构
2. **路径混淆**：区分不同项目的相同文件名
3. **权限问题**：确认文件是否可读写

### 错误恢复步骤
1. 承认路径理解错误
2. 重新查看目录结构
3. 使用正确的相对路径
4. 向用户确认操作的文件
```

#### 4. 最佳实践
```markdown
## 路径处理最佳实践

### 操作前检查
- [ ] 确认当前工作区
- [ ] 验证目标文件路径
- [ ] 使用相对路径引用
- [ ] 避免假设目录结构

### 用户交互
- 当路径不确定时，主动询问用户
- 提供清晰的路径说明
- 在操作前确认目标文件
- 承认并纠正路径错误
```
